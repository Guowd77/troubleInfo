(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index"],{"171e":function(t,e,s){"use strict";s.r(e);var i=s("83e3"),a=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);e["default"]=a.a},"7b8e":function(t,e,s){},"83e3":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s("3b07"),a=s("13c7"),n=function(){return Promise.all([s.e("common/vendor"),s.e("components/uni-calendar/uni-calendar")]).then(s.bind(null,"d1b4"))},l={components:{uniCalendar:n},data:function(){return{modalNumber:0,username:"",modalStyle:{},focusDate:"",code:"",list:"",modalName:null,modalShow:0,seaList:"",seaListDepart:"",showList:[],page:0,loadText:"",multiArray:[["成都市"],[],[]],multiIndex:[0,0,0],allList:[{name:"成都市",child1:[]}],focusPlace:""}},methods:{logout:function(){try{t.setStorageSync("logout",1)}catch(e){}t.redirectTo({url:"login"})},showModal:function(t){this.modalName="Image",this.modalShow=1,this.modalNumber=t},hideModal:function(){this.modalName=null,this.modalShow=0},open:function(){this.$refs.calendar.open()},chooseFocusPlace:function(t){if(this.focusPlace=this.allList[t.detail.value[0]].child1[t.detail.value[1]].child2[t.detail.value[2]],console.log(this.focusPlace," at pages\\index.vue:138"),this.showList=[],this.seaListDepart=this.searchDepart(this.focusPlace),0!=this.seaListDepart.length){for(var e=0+15*this.page,s=e;e<s+15&&e<this.seaListDepart.length;e++)this.showList.push(this.seaListDepart[e]);this.showList.length<this.seaListDepart.length?this.loadText="上拉加载更多":this.showList.length==this.seaListDepart.length&&(this.loadText="加载完毕")}else 0==this.seaListDepart.length&&(this.loadText="该加油站没有数据")},confirm:function(t){if(this.page=0,console.log(t.fulldate," at pages\\index.vue:158"),this.focusDate=t.fulldate,this.seaList=[],this.seaList=this.search(t.fulldate),this.seaList=(0,a.sortArray)(this.seaList),this.showList=[],0!=this.seaList.length){for(var e=0+15*this.page,s=e;e<s+15&&e<this.seaList.length;e++)this.seaList[e].newtime=this.seaList[e].time.substring(11,16),this.showList.push(this.seaList[e]);this.showList.length<this.seaList.length?this.loadText="上拉加载更多":this.showList.length==this.seaList.length&&(this.loadText="加载完毕")}else 0==this.seaList.length&&(this.loadText="本日没有数据")},search:function(t){var e=[];return this.list.forEach(function(s){-1!=s.time.indexOf(t)&&e.push(s)}),e},searchDepart:function(t){var e=[];return this.seaList.forEach(function(s){-1!=s.departname.indexOf(t)&&e.push(s)}),e},bindMultiPickerColumnChange:function(t){switch(this.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:this.multiIndex.splice(1,1,0),this.multiIndex.splice(2,1,0);break;case 1:for(var e=0;e<this.allList[0].child1.length;e++)if(this.multiIndex[1]==e){this.multiArray[2]=this.allList[0].child1[e].child2;break}this.multiIndex.splice(2,1,0);break}this.$forceUpdate()}},onLoad:function(t){this.code=t.code,this.username=t.name;var e=new Date,s=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");this.focusDate="".concat(s,"-").concat(a,"-").concat(n);var l={departid:this.code},h=this;(0,i.getDepart)(l).then(function(t){for(var e=0;e<t.data.length;e++)if(3==t.data[e].orgcode.length)h.allList[0].child1.push({name:t.data[e].childname,child2:[]}),h.multiArray[1].push(t.data[e].childname);else if(t.data[e].orgcode.length>3)for(var s=0;s<h.allList[0].child1.length;s++)t.data[e].departname==h.allList[0].child1[s].name&&(h.allList[0].child1[s].child2.push(t.data[e].childname),0==s&&h.multiArray[2].push(t.data[e].childname));console.log(h.allList," at pages\\index.vue:254")})},mounted:function(){var e={departid:this.code},s=this;(0,i.getInfo)(e).then(function(e){if(s.list=e.data,s.seaList=s.search(s.focusDate),s.seaList=(0,a.sortArray)(s.seaList),0!=s.seaList.length){for(var i=0,n=i;i<n+15&&i<s.seaList.length;i++)s.seaList[i].newtime=s.seaList[i].time.substring(11,16),s.showList.push(s.seaList[i]);s.showList.length<s.seaList.length?s.loadText="上拉加载更多":s.showList.length==s.seaList.length&&(s.loadText="加载完毕")}else 0==s.seaList.length&&(s.loadText="本日没有数据");t.hideLoading()})},onReachBottom:function(){if(this.page=this.page+1,0!=this.seaList.length){for(var e=0+15*this.page,s=e;e<s+15&&e<this.seaList.length;e++)this.seaList[e].newtime=this.seaList[e].time.substring(11,16),this.showList.push(this.seaList[e]);this.showList.length<this.seaList.length?this.loadText="上拉加载更多":this.showList.length==this.seaList.length&&(this.loadText="--加载完毕--")}else 0==this.seaList.length&&(this.loadText="本日没有数据");t.showLoading({title:"加载中"}),setTimeout(function(){t.hideLoading()},300)}};e.default=l}).call(this,s("6e42")["default"])},8805:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})},"8a5a":function(t,e,s){"use strict";var i=s("7b8e"),a=s.n(i);a.a},bb4f:function(t,e,s){"use strict";s.r(e);var i=s("8805"),a=s("171e");for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);s("8a5a");var l=s("2877"),h=Object(l["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=h.exports}},[["33e2","common/runtime","common/vendor"]]]);