(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index"],{"171e":function(t,e,a){"use strict";a.r(e);var i=a("83e3"),s=a.n(i);for(var l in i)"default"!==l&&function(t){a.d(e,t,function(){return i[t]})}(l);e["default"]=s.a},"7b8e":function(t,e,a){},"83e3":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("3b07"),s=function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-calendar/uni-calendar")]).then(a.bind(null,"d1b4"))},l={components:{uniCalendar:s},data:function(){return{modalNumber:0,username:"",modalStyle:{},focusDate:"",code:"",list:"",modalName:null,modalShow:0,seaList:"",seaListDepart:"",showList:[],showVideo:0,haveVideo:0,videoUrl:"",page:0,loadText:"",multiArray:[[],["不限制"],["不限制"]],multiIndex:[0,0,0],allList:[{child1:[{name:"不限制",child2:["不限制"]}]}],focusPlace:""}},methods:{logout:function(){try{t.setStorageSync("logout",1)}catch(e){}t.redirectTo({url:"login"})},showModal:function(t){var e=this;this.showVideo=0,this.modalName="Image",this.modalShow=1,this.haveVideo=0,this.modalNumber=t;var a={filename:this.showList[t].filename.substring(0,this.showList[t].filename.length-4)};console.log(a," at pages\\index.vue:144"),(0,i.getVideo)(a).then(function(t){"success"==t.data.msg?"mp4"==t.data.data.type&&(e.haveVideo=1,e.videoUrl=t.data.data.path,e.showVideo=1):e.haveVideo=0})},switchVideo:function(){1==this.haveVideo?(this.showVideo=!this.showVideo,console.log(this.videoUrl," at pages\\index.vue:161")):t.showToast({title:"本条无视频",icon:"none",duration:1500})},videoErrorCallback:function(e){t.showModal({content:e.target.errMsg,showCancel:!1})},hideModal:function(){this.modalName=null,this.modalShow=0},open:function(){this.$refs.calendar.open()},chooseFocusPlace:function(t){if(0==t.detail.value[1]?(this.seaListDepart=this.seaList,this.focusPlace="all"):0==t.detail.value[2]?(this.focusPlace=this.allList[t.detail.value[0]].child1[t.detail.value[1]].code,this.seaListDepart=this.searchDepartByCode(this.focusPlace)):(this.focusPlace=this.allList[t.detail.value[0]].child1[t.detail.value[1]].child2[t.detail.value[2]],this.seaListDepart=this.searchDepartByName(this.focusPlace)),this.showList=[],this.page=0,console.log(this.seaList," at pages\\index.vue:199"),console.log(this.seaListDepart," at pages\\index.vue:200"),0!=this.seaListDepart.length){for(var e=0+15*this.page,a=e;e<a+15&&e<this.seaListDepart.length;e++)this.showList.push(this.seaListDepart[e]);this.showList.length<this.seaListDepart.length?this.loadText="上拉加载更多":this.showList.length==this.seaListDepart.length&&(this.loadText="加载完毕")}else 0==this.seaListDepart.length&&(this.loadText="本日此加油站没有数据");console.log(this.focusPlace," at pages\\index.vue:215")},confirm:function(t){if(this.page=0,console.log(t.fulldate," at pages\\index.vue:219"),this.focusDate=t.fulldate,this.seaList=[],this.seaList=this.search(t.fulldate),this.seaListDepart=this.seaList,console.log(this.seaList," at pages\\index.vue:224"),this.showList=[],0!=this.seaList.length){for(var e=0;e<this.seaList.length;e++)this.seaList[e].newtime=this.seaList[e].time.substring(11,16);for(var a=0+15*this.page,i=a;a<i+15&&a<this.seaList.length;a++)this.showList.push(this.seaList[a]);this.showList.length<this.seaList.length?this.loadText="上拉加载更多":this.showList.length==this.seaList.length&&(this.loadText="加载完毕")}else 0==this.seaList.length&&(this.loadText="本日没有数据")},search:function(t){var e=[];return this.list.forEach(function(a){-1!=a.time.indexOf(t)&&e.push(a)}),e},searchDepartByName:function(t){var e=[];return this.seaList.forEach(function(a){-1!=a.departname.indexOf(t)&&e.push(a)}),e},searchDepartByCode:function(t){var e=[];return this.seaList.forEach(function(a){-1!=a.poscode.indexOf(t)&&e.push(a)}),e},bindMultiPickerColumnChange:function(t){switch(this.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:this.multiIndex.splice(1,1,0),this.multiIndex.splice(2,1,0);break;case 1:for(var e=0;e<this.allList[0].child1.length;e++)if(this.multiIndex[1]==e){this.multiArray[2]=this.allList[0].child1[e].child2;break}this.multiIndex.splice(2,1,0);break}this.$forceUpdate()}},onLoad:function(t){this.code=t.code,this.username=t.name;var e=new Date,a=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0");this.focusDate="".concat(a,"-").concat(s,"-").concat(l);var h={departid:this.code.substring(0,3)},o=this;(0,i.getDepart)(h).then(function(t){if(3==t.data[0].orgcode.length){if(o.allList[0].name=t.data[0].departname,o.allList[0].code=t.data[0].orgcode,o.multiArray[0]=[o.allList[0].name],3==o.code.length){for(var e=0;e<t.data.length;e++)if(3==t.data[e].orgcode.length)o.allList[0].child1.push({name:t.data[e].childname,code:t.data[e].childcode,child2:["不限制"]}),o.multiArray[1].push(t.data[e].childname);else if(t.data[e].orgcode.length>3)for(var a=0;a<o.allList[0].child1.length;a++)t.data[e].departname==o.allList[0].child1[a].name&&o.allList[0].child1[a].child2.push(t.data[e].childname)}else if(6==o.code.length){for(e=0;e<t.data.length;e++)t.data[e].childcode==o.code?(o.allList[0].child1.push({name:t.data[e].childname,code:t.data[e].childcode,child2:["不限制"]}),o.multiArray[1].push(t.data[e].childname)):t.data[e].orgcode==o.code&&(o.allList[0].child1[1].child2.push(t.data[e].childname),o.multiArray[2].push(t.data[e].childname));o.multiIndex[1]=1}else if(9==o.code.length){for(e=0;e<t.data.length;e++)t.data[e].childcode==o.code&&(o.allList[0].child1.push({name:t.data[e].departname,code:t.data[e].orgcode,child2:["不限制"]}),o.multiArray[1].push(t.data[e].departname),o.allList[0].child1[1].child2.push(t.data[e].childname),o.multiArray[2].push(t.data[e].childname));o.multiIndex[1]=1,o.multiIndex[2]=1}}else o.multiArray=[[],["服务器出错"],[]];console.log(o.allList," at pages\\index.vue:380"),console.log(o.multiArray," at pages\\index.vue:381")})},mounted:function(){var e={departid:this.code},a=this;(0,i.getInfo)(e).then(function(e){if(a.list=e.data,a.seaList=a.search(a.focusDate),0!=a.seaList.length){for(var i=0,s=i;i<s+15&&i<a.seaList.length;i++)a.seaList[i].newtime=a.seaList[i].time.substring(11,16),a.showList.push(a.seaList[i]);a.showList.length<a.seaList.length?a.loadText="上拉加载更多":a.showList.length==a.seaList.length&&(a.loadText="加载完毕")}0==a.seaList.length&&(a.loadText="本日没有数据"),console.log(a.list," at pages\\index.vue:407"),t.hideLoading()})},onReachBottom:function(){if(this.page=this.page+1,0!=this.seaListDepart.length){for(var e=0+15*this.page,a=e;e<a+15&&e<this.seaListDepart.length;e++)this.showList.push(this.seaListDepart[e]);this.showList.length<this.seaListDepart.length?this.loadText="上拉加载更多":this.showList.length==this.seaListDepart.length&&(this.loadText="--加载完毕--")}else 0==this.seaListDepart.length&&(this.loadText="本日没有数据");t.showLoading({title:"加载中"}),setTimeout(function(){t.hideLoading()},300)}};e.default=l}).call(this,a("6e42")["default"])},"8a5a":function(t,e,a){"use strict";var i=a("7b8e"),s=a.n(i);s.a},"8c50":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},bb4f:function(t,e,a){"use strict";a.r(e);var i=a("8c50"),s=a("171e");for(var l in s)"default"!==l&&function(t){a.d(e,t,function(){return s[t]})}(l);a("8a5a");var h=a("2877"),o=Object(h["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports}},[["33e2","common/runtime","common/vendor"]]]);