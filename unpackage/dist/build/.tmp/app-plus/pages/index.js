(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index"],{1683:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"171e":function(t,e,i){"use strict";i.r(e);var s=i("83e3"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},"7b8e":function(t,e,i){},"83e3":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("3b07"),a=i("13c7"),n=function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-calendar/uni-calendar")]).then(i.bind(null,"d1b4"))},l={components:{uniCalendar:n},data:function(){return{modalNumber:0,username:"",modalStyle:{},focusDate:"",code:"",list:"",modalName:null,modalShow:0,seaList:"",seaListDepart:"",showList:[],showVideo:0,haveVideo:0,videoUrl:"",page:0,loadText:"",multiArray:[["成都市"],[],[]],multiIndex:[0,0,0],allList:[{name:"成都市",child1:[]}],focusPlace:""}},methods:{logout:function(){try{t.setStorageSync("logout",1)}catch(e){}t.redirectTo({url:"login"})},showModal:function(t){var e=this;this.showVideo=0,this.modalName="Image",this.modalShow=1,this.haveVideo=0,this.modalNumber=t;var i={filename:this.showList[t].filename.substring(0,this.showList[t].filename.length-4)};console.log(i," at pages\\index.vue:169"),(0,s.getVideo)(i).then(function(t){"success"==t.data.msg?"jpg"==t.data.data.type&&(e.haveVideo=1,e.videoUrl="http://118.121.27.25:18080/oil/upload/abc.mp4"):e.haveVideo=0})},switchVideo:function(){1==this.haveVideo?(this.showVideo=!this.showVideo,console.log(this.videoUrl," at pages\\index.vue:186")):t.showToast({title:"本条无视频",icon:"none",duration:1500})},videoErrorCallback:function(e){t.showModal({content:e.target.errMsg,showCancel:!1})},hideModal:function(){this.modalName=null,this.modalShow=0},open:function(){this.$refs.calendar.open()},chooseFocusPlace:function(t){if(this.focusPlace=this.allList[t.detail.value[0]].child1[t.detail.value[1]].child2[t.detail.value[2]],console.log(this.focusPlace," at pages\\index.vue:211"),this.showList=[],this.page=0,console.log(this.seaList," at pages\\index.vue:214"),this.seaListDepart=this.searchDepart(this.focusPlace),0!=this.seaListDepart.length){for(var e=0+15*this.page,i=e;e<i+15&&e<this.seaListDepart.length;e++)this.showList.push(this.seaListDepart[e]);this.showList.length<this.seaListDepart.length?this.loadText="上拉加载更多":this.showList.length==this.seaListDepart.length&&(this.loadText="加载完毕")}else 0==this.seaListDepart.length&&(this.loadText="本日此加油站没有数据")},confirm:function(t){if(this.page=0,console.log(t.fulldate," at pages\\index.vue:233"),this.focusDate=t.fulldate,this.seaList=[],this.seaList=this.search(t.fulldate),this.seaList=(0,a.sortArray)(this.seaList),this.showList=[],0!=this.seaList.length){for(var e=0;e<this.seaList.length;e++)this.seaList[e].newtime=this.seaList[e].time.substring(11,16);for(var i=0+15*this.page,s=i;i<s+15&&i<this.seaList.length;i++)this.showList.push(this.seaList[i]);this.showList.length<this.seaList.length?this.loadText="上拉加载更多":this.showList.length==this.seaList.length&&(this.loadText="加载完毕")}else 0==this.seaList.length&&(this.loadText="本日没有数据")},search:function(t){var e=[];return this.list.forEach(function(i){-1!=i.time.indexOf(t)&&e.push(i)}),e},searchDepart:function(t){var e=[];return console.log(this.seaList," at pages\\index.vue:268"),this.seaList.forEach(function(i){-1!=i.departname.indexOf(t)&&e.push(i)}),e},bindMultiPickerColumnChange:function(t){switch(this.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:this.multiIndex.splice(1,1,0),this.multiIndex.splice(2,1,0);break;case 1:for(var e=0;e<this.allList[0].child1.length;e++)if(this.multiIndex[1]==e){this.multiArray[2]=this.allList[0].child1[e].child2;break}this.multiIndex.splice(2,1,0);break}this.$forceUpdate()}},onLoad:function(t){this.code=t.code,this.username=t.name;var e=new Date,i=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");this.focusDate="".concat(i,"-").concat(a,"-").concat(n);var l={departid:this.code},h=this;(0,s.getDepart)(l).then(function(t){if(3==t.data[0].orgcode.length){for(var e=0;e<t.data.length;e++)if(3==t.data[e].orgcode.length)h.allList[0].child1.push({name:t.data[e].childname,child2:[]}),h.multiArray[1].push(t.data[e].childname);else if(t.data[e].orgcode.length>3)for(var i=0;i<h.allList[0].child1.length;i++)t.data[e].departname==h.allList[0].child1[i].name&&(h.allList[0].child1[i].child2.push(t.data[e].childname),0==i&&h.multiArray[2].push(t.data[e].childname))}else if(6==t.data[0].orgcode.length){h.allList[0].child1.push({name:t.data[0].departname,child2:[]}),h.multiArray[1].push(t.data[0].departname);for(e=0;e<t.data.length;e++)t.data[e].departname==h.allList[0].child1[0].name&&(h.allList[0].child1[0].child2.push(t.data[e].childname),h.multiArray[2].push(t.data[e].childname))}else h.multiArray=[[],["服务器出错"],[]];console.log(h.allList," at pages\\index.vue:351")})},mounted:function(){var e={departid:this.code},i=this;(0,s.getInfo)(e).then(function(e){if(i.list=e.data,i.seaList=i.search(i.focusDate),i.seaList=(0,a.sortArray)(i.seaList),0!=i.seaList.length){for(var s=0,n=s;s<n+15&&s<i.seaList.length;s++)i.seaList[s].newtime=i.seaList[s].time.substring(11,16),i.showList.push(i.seaList[s]);i.showList.length<i.seaList.length?i.loadText="上拉加载更多":i.showList.length==i.seaList.length&&(i.loadText="加载完毕")}0==i.seaList.length&&(i.loadText="本日没有数据"),console.log(i.list," at pages\\index.vue:378"),t.hideLoading()})},onReachBottom:function(){if(this.page=this.page+1,0!=this.seaList.length){for(var e=0+15*this.page,i=e;e<i+15&&e<this.seaList.length;e++)this.showList.push(this.seaList[e]);this.showList.length<this.seaList.length?this.loadText="上拉加载更多":this.showList.length==this.seaList.length&&(this.loadText="--加载完毕--")}else 0==this.seaList.length&&(this.loadText="本日没有数据");t.showLoading({title:"加载中"}),setTimeout(function(){t.hideLoading()},300)}};e.default=l}).call(this,i("6e42")["default"])},"8a5a":function(t,e,i){"use strict";var s=i("7b8e"),a=i.n(s);a.a},bb4f:function(t,e,i){"use strict";i.r(e);var s=i("1683"),a=i("171e");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("8a5a");var l=i("2877"),h=Object(l["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=h.exports}},[["33e2","common/runtime","common/vendor"]]]);